deploy:
  image: composer:latest
  only:
    - master
  script:
    - composer global require --prefer-dist laravel/envoy=~1.0 --no-interaction --prefer-dist --quiet
    - envoy run deploy

build:
  stage: build
  script:
    - composer update

code-stander-test:
  stage: test
  script:
    - vendor/bin/php-cs-fixer fix --verbose --allow-risky=yes --config .php-cs-fixer.php
    - php vendor/bin/phpstan analyse

test-7.4:
  stage: test
  script:
    - echo '7.4' > .php-version
    - composer update
    - symfony php vendor/bin/phpunit

test-8.1:
  stage: test
  script:
    - echo '8.1' > .php-version
    - composer update
    - symfony php vendor/bin/phpunit

test-8.2:
  stage: test
  script:
    - echo '8.2' > .php-version
    - composer update
    - symfony php vendor/bin/phpunit

